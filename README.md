# Ethereal Contracts (äº‘æ¢¦å¯„æ„¿åˆçº¦å±‚)

è¿™æ˜¯ **äº‘æ¢¦å¯„æ„¿ (Cloud Dream Protocol)** é¡¹ç›®çš„æ™ºèƒ½åˆçº¦ç‹¬ç«‹ä»“åº“ã€‚åŒ…å«äº†æ ¸å¿ƒä¸šåŠ¡åˆçº¦ã€éƒ¨ç½²è„šæœ¬ä»¥åŠä¸å‰ç«¯çš„æ•°æ®åŒæ­¥æœºåˆ¶ã€‚

## ğŸ“ ç›®å½•ç»“æ„è¯´æ˜

```
ethereal-contracts/
â”œâ”€â”€ contracts/               # æ™ºèƒ½åˆçº¦æºæ–‡ä»¶ (.sol)
â”‚   â”œâ”€â”€ CloudDreamProtocol.sol   # æ ¸å¿ƒä¸šåŠ¡åˆçº¦ï¼ˆç¥ˆæ„¿ã€é—®å¤©ã€å¬æ¾œï¼‰
â”‚   â””â”€â”€ Mocks.sol                # ç”¨äºæœ¬åœ°æµ‹è¯•çš„ Mock åˆçº¦ (VRF Mock)
â”œâ”€â”€ deploy/                  # éƒ¨ç½²ç›¸å…³
â”‚   â”œâ”€â”€ deploy.cjs               # ä¸»éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ deployment-info.json     # [è‡ªåŠ¨ç”Ÿæˆ] åˆçº¦éƒ¨ç½²ä¿¡æ¯ä¸ABI
â”‚   â”œâ”€â”€ test-seek-truth.cjs      # ç¥ˆæ„¿æµç¨‹æµ‹è¯•
â”‚   â”œâ”€â”€ admin-actions.cjs        # ç®¡ç†å‘˜æƒé™æµ‹è¯•
â”‚   â”œâ”€â”€ reset-to-8.cjs           # [è°ƒè¯•] å¼ºåˆ¶è®¾ç½®åŠ«æ•°ä¸º8
â”‚   â””â”€â”€ boost_karma.cjs          # [è°ƒè¯•] å¢åŠ ç¦æŠ¥ä½™é¢
â”œâ”€â”€ docs/                    # é¡¹ç›®æ–‡æ¡£
â”‚   â””â”€â”€ æ™ºèƒ½åˆçº¦è®¾è®¡è§„èŒƒ.md      # è¯¦ç»†çš„ä¸šåŠ¡é€»è¾‘ä¸å‚æ•°è®¾è®¡æ–‡æ¡£
â”œâ”€â”€ artifacts/               # ç¼–è¯‘åçš„äº§ç‰© (ABI, Bytecode)
â”œâ”€â”€ cache/                   # Hardhat ç¼–è¯‘ç¼“å­˜
â”œâ”€â”€ hardhat.config.cjs       # Hardhat é…ç½®æ–‡ä»¶ (ç½‘ç»œã€Solidityç‰ˆæœ¬)
â”œâ”€â”€ package.json             # é¡¹ç›®ä¾èµ–é…ç½®

```

## ğŸ›  è„šæœ¬å·¥å…·ä½¿ç”¨æŒ‡å—

æ‰€æœ‰è„šæœ¬å‡éœ€åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹é€šè¿‡ `npx hardhat run` è¿è¡Œã€‚

### 1. æ ¸å¿ƒéƒ¨ç½²
```bash
# éƒ¨ç½²åˆçº¦åˆ°æœ¬åœ°ç½‘ç»œ
npx hardhat run deploy/deploy.cjs --network localhost
```

### 2. è°ƒè¯•ä¸åŠŸèƒ½æµ‹è¯•
ä»¥ä¸‹è„šæœ¬ç”¨äºå¼€å‘è¿‡ç¨‹ä¸­çš„å¿«é€ŸéªŒè¯å’ŒçŠ¶æ€è°ƒæ•´ã€‚

*   **æµ‹è¯•ç¥ˆæ„¿æµç¨‹ (test-seek-truth.cjs)**
    ```bash
    npx hardhat run test/test-seek-truth.cjs --network localhost
    ```
    *ä½œç”¨ï¼šæ¨¡æ‹Ÿç”¨æˆ·è°ƒç”¨ `seekTruth`ï¼Œæ‰“å°éšæœºç»“æœå’Œäº‹ä»¶æ—¥å¿—ã€‚*

*   **æµ‹è¯•ç®¡ç†å‘˜æ“ä½œ (admin-actions.cjs)**
    ```bash
    npx hardhat run test/admin-actions.cjs --network localhost
    ```
    *ä½œç”¨ï¼šéªŒè¯ç®¡ç†å‘˜æå–èµ„é‡‘ã€è®¾ç½®å‚æ•°ç­‰æƒé™ã€‚*

*   **[è°ƒè¯•] å¼ºåˆ¶ä¿åº• (reset-to-8.cjs)**
    ```bash
    npx hardhat run test/reset-to-8.cjs --network localhost
    ```
    *ä½œç”¨ï¼šå°†æµ‹è¯•è´¦æˆ·çš„åŠ«æ•°ç›´æ¥ä¿®æ”¹ä¸º 8ã€‚ä¸‹æ¬¡ç¥ˆæ„¿å¿…è§¦å‘ç¬¬ 9 æ¬¡çš„å¤§ä¿åº•ï¼ˆå¤©é“å›å“ï¼‰ã€‚*

*   **[è°ƒè¯•] å¢åŠ ç¦æŠ¥ (boost_karma.cjs)**
    ```bash
    npx hardhat run test/boost_karma.cjs --network localhost
    ```
    *ä½œç”¨ï¼šç›´æ¥ä¿®æ”¹åˆçº¦å­˜å‚¨ï¼Œç»™æµ‹è¯•è´¦æˆ·å¢åŠ å¤§é‡ç¦æŠ¥ï¼Œç”¨äºæµ‹è¯•â€œå…è´¹ç¥ˆæ„¿â€åŠŸèƒ½ã€‚*

## ğŸš€ å¼€å‘ä¸éƒ¨ç½²æŒ‡å—

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿å·²å®‰è£… [Node.js](https://nodejs.org/) (v18+)ã€‚

```bash
# è¿›å…¥åˆçº¦ç›®å½•
cd ethereal-contracts

# å®‰è£…ä¾èµ–
npm install
```

### 2. å¯åŠ¨æœ¬åœ°åŒºå—é“¾èŠ‚ç‚¹

Hardhat å†…ç½®äº†ä¸€ä¸ªæœ¬åœ°ä»¥å¤ªåŠç½‘ç»œï¼Œç”¨äºå¼€å‘å’Œæµ‹è¯•ã€‚

```bash
# å¯åŠ¨èŠ‚ç‚¹ (å»ºè®®ä¿æŒæ­¤ç»ˆç«¯çª—å£è¿è¡Œ)
npx hardhat node
```
*å¯åŠ¨åï¼Œä½ å°†çœ‹åˆ°ä¸€ç³»åˆ—ç”Ÿæˆçš„æµ‹è¯•è´¦æˆ·ï¼ˆå«ç§é’¥ï¼‰å’Œä¸€ä¸ªè¿è¡Œåœ¨ `http://127.0.0.1:8545` çš„ RPC æœåŠ¡ã€‚*

### 3. ç¼–è¯‘åˆçº¦

```bash
npx hardhat compile
```

### 4. éƒ¨ç½²åˆçº¦ (åˆ°æœ¬åœ°ç½‘ç»œ)

æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£æ‰§è¡Œéƒ¨ç½²ï¼š

```bash
npx hardhat run deploy/deploy.cjs --network localhost
```

**âœ… éƒ¨ç½²ä¿¡æ¯ä¿å­˜ï¼š**
éƒ¨ç½²è„šæœ¬æ‰§è¡ŒæˆåŠŸåï¼Œä¼šå°†åŒ…å« `åˆçº¦åœ°å€` å’Œ `ABI` çš„ `deployment-info.json` æ–‡ä»¶ä¿å­˜åˆ°**deployç›®å½•**ï¼š`deploy/deployment-info.json`ã€‚

**âš ï¸ å‰ç«¯åŒæ­¥ï¼š**
æ‚¨éœ€è¦**æ‰‹åŠ¨**å°†æ­¤æ–‡ä»¶å¤åˆ¶åˆ°å‰ç«¯å¯¹åº”çš„ç›®å½•ï¼ˆå¦‚ `../ethereal-realm/src/deployment-info.json`ï¼‰ï¼Œä»¥ä¾¿å‰ç«¯åº”ç”¨èƒ½å¤Ÿè¯»å–åˆ°æœ€æ–°çš„åˆçº¦åœ°å€å’Œæ¥å£ã€‚

### 5. å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

```bash
# è¿è¡Œå•å…ƒæµ‹è¯• (å¦‚æœ‰)
npx hardhat test

# æ¸…ç†ç¼“å­˜å’Œæ„å»ºäº§ç‰©
npx hardhat clean

# å¯åŠ¨ Hardhat æ§åˆ¶å° (äº¤äº’å¼ç¯å¢ƒ)
npx hardhat console --network localhost
```
